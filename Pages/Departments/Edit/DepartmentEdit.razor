@using RAS823_MC_CiudadMunicipal_FrontEnd.Dto.Users
@inherits DepartmentEditBase
<div>

    <EditForm id="editFormDepartmentData" Model="managementDepartmentDtoForEdit" FormName="EditFormData" OnValidSubmit="HandleFormValid">
        <DataAnnotationsValidator />
        <div class="row">
            <div class="mt-3 col-lg-6 col-sm-12">
                <div class="form-group marginCustom">
                    <label>Nombre Departamento *</label>
                    @if (IsEditable)
                    {
                        <InputText class="form-control" @bind-Value="managementDepartmentDtoForEdit.Name"></InputText>
                    }
                    else
                    {
                        <InputText class="form-control disable" @bind-Value="managementDepartmentDtoForEdit.Name" readonly></InputText>
                    }

                    <ValidationMessage For="@(() => managementDepartmentDtoForEdit.Name)" />
                </div>
            </div>
            <div class="mt-3 col-lg-6 col-sm-12">
                <div class="form-group marginCustom">
                    <label>Correo Departamento</label>
                    <InputText class="form-control" @bind-Value="managementDepartmentDtoForEdit.EmailAddress"></InputText>
                    <ValidationMessage For="@(() => managementDepartmentDtoForEdit.EmailAddress)" />
                </div>
            </div>

            <div class="mt-3 col-12">
                <label>Cédula Jefatura *</label>
                <AutoFill TValue="UserResponse" Value="principalUserSelected" Items="listUserToAssign"
                          SkipEnter="true" SkipEsc="true" IsLikeMatch="true" OnSelectedItemChanged="OnSelectedItemChanged"
                          OnGetDisplayText="OnGetDisplayText" class="mb-3" IsSelectAllTextOnFocus="true">

                    <Template Context="itemUser">
                        <div class="d-flex">

                            <div class="ps-2">
                                <div><p class="custom-margin-0">@itemUser.Identification</p></div>
                                <div> <span>@itemUser.UserName</span></div>
                            </div>
                        </div>
                    </Template>
                </AutoFill>
                <ValidationMessage For="@(() => managementDepartmentDtoForEdit.IdUserLeadershipDepartment)" />
            </div>
            <div class="mt-3  col-12">
                <div class="form-group marginCustom">
                    <label>Nombre Jefatura</label>
                    <InputText class="form-control" @bind-Value="principalUserSelected.UserName" readonly></InputText>
                </div>
            </div>
        </div>
        <div class="row custom-buttons">
            <div class="d-flex-center col-md-6 col-sm-12">
                <AuthorizeScopeDirective Scope="Edit:Department">
                    <div class="input-submit-icon button-general-form">
                        <input type="submit" value="Agregar" />
                    </div>
                </AuthorizeScopeDirective>
            </div>

            <div class="d-flex-center col-md-6 col-sm-12">
                <button type="button" class="custom-button-close button-general-form" @onclick="CloseModal">
                    Cancelar
                </button>
            </div>
        </div>



    </EditForm>



</div>
